"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9e3],{9e3:($,_,l)=>{l.r(_),l.d(_,{ProfilePageModule:()=>F});var f=l(1368),p=l(4716),s=l(2112),h=l(2508),d=l(1528),e=l(4496),m=l(7808),C=l(2948),y=l(4256),G=l(8828);let I=(()=>{var i;class c{constructor(){}}return(i=c).\u0275fac=function(n){return new(n||i)},i.\u0275prov=e.wxM({token:i,factory:i.\u0275fac,providedIn:"root"}),c})();var b=l(6032),x=l(7700),k=l(3008);function M(i,c){1&i&&(e.I0R(0,"div",3),e.wR5(1,"ion-spinner",4),e.C$Y())}function O(i,c){if(1&i&&(e.I0R(0,"ion-card-content",21),e.wR5(1,"img",22),e.C$Y()),2&i){const o=e.GaO(2);e.yG2(),e._6D("alt",o.business.companyName),e.E7m("src",o.business.image,e.K6U)}}function T(i,c){if(1&i){const o=e.KQA();e.I0R(0,"ion-button",23),e.qCj("click",function(){e.usT(o),e.GaO();const t=e.Gew(13),r=e.GaO();return e.CGJ(r.uploadFile(t))}),e.OEk(1,"Save Image"),e.C$Y()}}function R(i,c){if(1&i){const o=e.KQA();e.I0R(0,"ion-chip",24),e.qCj("click",function(){const r=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.addCategory(r))}),e.OEk(1),e.C$Y()}if(2&i){const o=c.$implicit;e._6D("id",o),e.yG2(),e.cNF(o)}}function E(i,c){if(1&i){const o=e.KQA();e.I0R(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.OEk(4),e.C$Y(),e.I0R(5,"ion-card-subtitle")(6,"ion-input",5),e.iHE("ngModelChange",function(t){e.usT(o);const r=e.GaO();return e.kNx(r.business.price,t)||(r.business.price=t),e.CGJ(t)}),e.C$Y()()(),e.I0R(7,"div",6),e.yuY(8,O,2,2,"ion-card-content",7),e.I0R(9,"ion-card-content",8)(10,"ion-button",9),e.qCj("click",function(){e.usT(o);const t=e.Gew(13);return e.CGJ(t.click())}),e.OEk(11," Change Image "),e.I0R(12,"input",10,11),e.qCj("change",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.onImageLoad())}),e.C$Y()(),e.yuY(14,T,2,0,"ion-button",12),e.C$Y()(),e.I0R(15,"ion-card-content")(16,"ion-textarea",13),e.iHE("ngModelChange",function(t){e.usT(o);const r=e.GaO();return e.kNx(r.business.description,t)||(r.business.description=t),e.CGJ(t)}),e.C$Y()(),e.I0R(17,"ion-card-content")(18,"ion-textarea",14),e.iHE("ngModelChange",function(t){e.usT(o);const r=e.GaO();return e.kNx(r.business.contact,t)||(r.business.contact=t),e.CGJ(t)}),e.C$Y()()(),e.I0R(19,"ion-grid")(20,"ion-row")(21,"ion-col",15),e.yuY(22,R,2,2,"ion-chip",16),e.C$Y()()(),e.wR5(23,"app-products",17),e.I0R(24,"ion-button",18),e.qCj("click",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.presentAlert())}),e.OEk(25,"Add Product"),e.C$Y(),e.I0R(26,"ion-button",19),e.qCj("click",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.publish())}),e.OEk(27,"Publish Post"),e.C$Y(),e.I0R(28,"ion-button",20),e.qCj("click",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.logout())}),e.OEk(29,"Logout"),e.C$Y()()}if(2&i){const o=e.GaO();e.yG2(4),e.cNF(o.business.companyName),e.yG2(2),e._6D("value",o.business.price),e.OKB("ngModel",o.business.price),e.yG2(2),e.E7m("ngIf",o.business.image),e.yG2(2),e.E7m("disabled",o.isImageLoaded),e.yG2(4),e.E7m("ngIf",o.isImageLoaded),e.yG2(2),e._6D("value",o.business.description),e.OKB("ngModel",o.business.description),e.yG2(2),e._6D("value",o.business.contact),e.OKB("ngModel",o.business.contact),e.yG2(4),e.E7m("ngForOf",o.categories),e.yG2(),e.E7m("products",o.products)}}const Y=[{path:"",component:(()=>{var i;class c{constructor(n,t,r,a,u,g){this.alertController=n,this.postsService=t,this.userService=r,this.router=a,this.searchService=u,this.imagesService=g,this.storage=(0,e.uUt)(m.u_),this.isImageLoaded=!1,this.categories=["Electronics","Clothing","Food","Tourism","Furniture","Books","Other"],this.products=[],this.business={companyName:"",price:0,description:"",image:"https://ionicframework.com/docs/img/demos/card-media.png",contact:0},this.nameParam="",this.isLoadingBusiness=!0,this.isLoadingProducts=!0,this.alertInputs=[{name:"productName",type:"text",placeholder:"Product Name",attributes:{maxlength:10}},{name:"price",type:"number",placeholder:"Price"}]}ngOnInit(){var n=this;return(0,d.c)(function*(){var t,r;n.nameParam=(null===(t=n.userService.getCurrentUser())||void 0===t?void 0:t.companyName)||"",console.log(n.nameParam),n.postsService.getPostByCompanyName(n.nameParam).then(a=>{n.business=a,console.log(n.business),n.isLoadingBusiness=!1}),n.postsService.getProductByName(n.nameParam).then(a=>{n.products=a,console.log("Products:",n.products),n.isLoadingProducts=!1}),n.searchService.getCategories((null===(r=n.userService.getCurrentUser())||void 0===r?void 0:r.companyName)||"").then(a=>{console.log(a),a.forEach(u=>{let g=document.getElementById(u);g&&(g.style.backgroundColor="green")})})})()}onImageLoad(){this.isImageLoaded=!0}presentAlert(){var n=this;return(0,d.c)(function*(){var r;yield(yield n.alertController.create({header:"Create a new product",inputs:n.alertInputs,buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Save",handler:(r=(0,d.c)(function*(a){yield n.postsService.createProduct(a,n.business).then(u=>{location.reload()})}),function(u){return r.apply(this,arguments)})}]})).present()})()}logout(){this.userService.clearCurrentUser(),this.nameParam="",this.router.navigateByUrl("/profile",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/login"])})}publish(){this.postsService.updatePost(this.business).then(n=>{location.reload()})}addCategory(n){this.searchService.addCategory(n,this.business.companyName).then(t=>{t||location.reload();let r=document.getElementById(n);r.style.backgroundColor="green"===(null==r?void 0:r.style.backgroundColor)?"ion-color-primary":"green"})}uploadFile(n){var t=this;return(0,d.c)(function*(){if(!n.files)return;const r=n.files;for(let a=0;a<r.length;a++){const u=r.item(a);if(u){const g=(0,m.IL)(t.storage,u.name);yield(0,m.GY)(g,u).then(P=>{console.log("Uploaded a blob or file!",P.ref.fullPath),t.downloadFile(P.ref.fullPath).then(function(){var N=(0,d.c)(function*(v){t.business.image=v,console.log(t.business.image),yield t.publish()});return function(v){return N.apply(this,arguments)}}())})}}})()}downloadFile(n){var t=this;return(0,d.c)(function*(){let r="";return yield(0,m.Kq)((0,m.IL)(t.storage,n)).then(a=>{console.log("File available at",a),r=a}),r})()}}return(i=c).\u0275fac=function(n){return new(n||i)(e.GI1(s.iW),e.GI1(C.c),e.GI1(y.u),e.GI1(h.E5),e.GI1(G._),e.GI1(I))},i.\u0275cmp=e.In1({type:i,selectors:[["app-profile"]],decls:5,vars:3,consts:[[3,"fullscreen"],["class","flex justify-center items-center p-5",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","p-5"],["name","lines"],["placeholder","Price of the service",3,"ngModel","value","ngModelChange"],[1,"min-w-56"],["class","card-content",4,"ngIf"],[1,"flex","justify-center","items-center"],[3,"disabled","click"],["type","file",2,"display","none",3,"change"],["upload",""],["class","ion-margin","color","success","expand","block",3,"click",4,"ngIf"],["auto-grow","true","placeholder","Add a description here",3,"ngModel","value","ngModelChange"],["placeholder","Add a contact number here",3,"ngModel","value","ngModelChange"],["size","12"],[3,"id","click",4,"ngFor","ngForOf"],[3,"products"],["color","primary","expand","block",1,"ion-margin",3,"click"],["color","orange","expand","block",1,"ion-margin",3,"click"],["expand","block","color","danger",1,"ion-margin",3,"click"],[1,"card-content"],[1,"centered-image",3,"src","alt"],["color","success","expand","block",1,"ion-margin",3,"click"],[3,"id","click"]],template:function(n,t){1&n&&(e.wR5(0,"app-header"),e.I0R(1,"ion-content",0),e.yuY(2,M,2,0,"div",1)(3,E,30,12,"div",2),e.C$Y(),e.wR5(4,"app-barfooter")),2&n&&(e.yG2(),e.E7m("fullscreen",!0),e.yG2(),e.E7m("ngIf",t.isLoadingBusiness||t.isLoadingProducts),e.yG2(),e.E7m("ngIf",!t.isLoadingBusiness&&!t.isLoadingProducts))},dependencies:[f.ay,f.u_,p.ue,p._G,s.sn,s.KC,s.Gg,s.YY,s.MN,s.I7,s.cz,s.Kk,s._i,s.YP,s.A5,s.qo,s.YA,s.gP,s.qG,b.k,x.s,k.G],styles:["ion-label[_ngcontent-%COMP%]{white-space:normal!important}.centered-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-card-title[_ngcontent-%COMP%]{--color: white}ion-card-subtitle[_ngcontent-%COMP%]{--color: orange}success[_ngcontent-%COMP%]{color:green}"]}),c})()}];let S=(()=>{var i;class c{}return(i=c).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.a4G({type:i}),i.\u0275inj=e.s3X({imports:[h.qQ.forChild(Y),h.qQ]}),c})();var L=l(28);let F=(()=>{var i;class c{}return(i=c).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.a4G({type:i}),i.\u0275inj=e.s3X({imports:[f.MD,p.y,s.wZ,S,L.A]}),c})()}}]);