"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[48],{48:(T,h,a)=>{a.r(h),a.d(h,{ProfilePageModule:()=>R});var d=a(1368),g=a(4716),s=a(2112),p=a(2508),m=a(1528),e=a(4496),P=a(2948),v=a(4256),C=a(8828),y=a(6032),_=a(7700),G=a(3008);function b(i,l){1&i&&(e.I0R(0,"div",3),e.wR5(1,"ion-spinner",4),e.C$Y())}function M(i,l){if(1&i){const o=e.KQA();e.I0R(0,"ion-chip",17),e.qCj("click",function(){const r=e.usT(o).$implicit,c=e.GaO(2);return e.CGJ(c.addCategory(r))}),e.OEk(1),e.C$Y()}if(2&i){const o=l.$implicit;e._6D("id",o),e.yG2(),e.cNF(o)}}function I(i,l){if(1&i){const o=e.KQA();e.I0R(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.OEk(4),e.C$Y(),e.I0R(5,"ion-card-subtitle")(6,"ion-input",5),e.iHE("ngModelChange",function(t){e.usT(o);const r=e.GaO();return e.kNx(r.business.price,t)||(r.business.price=t),e.CGJ(t)}),e.C$Y()()(),e.I0R(7,"div",6)(8,"ion-card-content",7),e.wR5(9,"img",8),e.C$Y()(),e.I0R(10,"ion-card-content")(11,"ion-textarea",9),e.iHE("ngModelChange",function(t){e.usT(o);const r=e.GaO();return e.kNx(r.business.description,t)||(r.business.description=t),e.CGJ(t)}),e.C$Y()(),e.I0R(12,"ion-card-content")(13,"ion-textarea",10),e.iHE("ngModelChange",function(t){e.usT(o);const r=e.GaO();return e.kNx(r.business.contact,t)||(r.business.contact=t),e.CGJ(t)}),e.C$Y()()(),e.I0R(14,"ion-grid")(15,"ion-row")(16,"ion-col",11),e.yuY(17,M,2,2,"ion-chip",12),e.C$Y()()(),e.wR5(18,"app-products",13),e.I0R(19,"ion-button",14),e.qCj("click",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.presentAlert())}),e.OEk(20,"Add Product"),e.C$Y(),e.I0R(21,"ion-button",15),e.qCj("click",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.publish())}),e.OEk(22,"Publish"),e.C$Y(),e.I0R(23,"ion-button",16),e.qCj("click",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.logout())}),e.OEk(24,"Logout"),e.C$Y()()}if(2&i){const o=e.GaO();e.yG2(4),e.cNF(o.business.companyName),e.yG2(2),e._6D("value",o.business.price),e.OKB("ngModel",o.business.price),e.yG2(3),e._6D("alt",o.business.companyName),e.E7m("src",o.business.image,e.K6U),e.yG2(2),e._6D("value",o.business.description),e.OKB("ngModel",o.business.description),e.yG2(2),e._6D("value",o.business.contact),e.OKB("ngModel",o.business.contact),e.yG2(4),e.E7m("ngForOf",o.categories),e.yG2(),e.E7m("products",o.products)}}const x=[{path:"",component:(()=>{var i;class l{constructor(n,t,r,c,u){this.alertController=n,this.postsService=t,this.userService=r,this.router=c,this.searchService=u,this.categories=["Electronics","Clothing","Food","Tourism","Furniture","Books","Other"],this.products=[],this.business={companyName:"",price:0,description:"",image:"https://ionicframework.com/docs/img/demos/card-media.png",contact:0},this.nameParam="",this.isLoadingBusiness=!0,this.isLoadingProducts=!0,this.alertInputs=[{name:"productName",type:"text",placeholder:"Product Name",attributes:{maxlength:10}},{name:"productImage",type:"url",placeholder:"Product Image"},{name:"price",type:"number",placeholder:"Price"}]}ngOnInit(){var n=this;return(0,m.c)(function*(){var t,r;n.nameParam=(null===(t=n.userService.getCurrentUser())||void 0===t?void 0:t.companyName)||"",console.log(n.nameParam),n.postsService.getPostByCompanyName(n.nameParam).then(c=>{n.business=c,console.log(n.business),n.isLoadingBusiness=!1}),n.postsService.getProductByName(n.nameParam).then(c=>{n.products=c,console.log("Products:",n.products),n.isLoadingProducts=!1}),n.searchService.getCategories((null===(r=n.userService.getCurrentUser())||void 0===r?void 0:r.companyName)||"").then(c=>{console.log(c),c.forEach(u=>{let f=document.getElementById(u);f&&(f.style.backgroundColor="green")})})})()}presentAlert(){var n=this;return(0,m.c)(function*(){var r;yield(yield n.alertController.create({header:"Create a new product",inputs:n.alertInputs,buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Save",handler:(r=(0,m.c)(function*(c){yield n.postsService.createProduct(c,n.business).then(u=>{location.reload()})}),function(u){return r.apply(this,arguments)})}]})).present()})()}logout(){this.userService.clearCurrentUser(),this.nameParam="",this.router.navigateByUrl("/profile",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/login"])})}publish(){this.postsService.updatePost(this.business).then(n=>{location.reload()})}addCategory(n){this.searchService.addCategory(n,this.business.companyName).then(t=>{t||location.reload();let r=document.getElementById(n);r.style.backgroundColor="green"===(null==r?void 0:r.style.backgroundColor)?"ion-color-primary":"green"})}}return(i=l).\u0275fac=function(n){return new(n||i)(e.GI1(s.iW),e.GI1(P.c),e.GI1(v.u),e.GI1(p.E5),e.GI1(C._))},i.\u0275cmp=e.In1({type:i,selectors:[["app-profile"]],decls:5,vars:3,consts:[[3,"fullscreen"],["class","flex justify-center items-center p-5",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","p-5"],["name","lines"],["placeholder","Price of the service",3,"ngModel","value","ngModelChange"],[1,"min-w-56"],[1,"card-content"],[1,"centered-image",3,"src","alt"],["auto-grow","true","placeholder","Add a description here",3,"ngModel","value","ngModelChange"],["placeholder","Add a contact number here",3,"ngModel","value","ngModelChange"],["size","12"],[3,"id","click",4,"ngFor","ngForOf"],[3,"products"],["color","primary","expand","block",1,"ion-margin",3,"click"],["color","orange","expand","block",1,"ion-margin",3,"click"],["expand","block","color","danger",1,"ion-margin",3,"click"],[3,"id","click"]],template:function(n,t){1&n&&(e.wR5(0,"app-header"),e.I0R(1,"ion-content",0),e.yuY(2,b,2,0,"div",1)(3,I,25,11,"div",2),e.C$Y(),e.wR5(4,"app-barfooter")),2&n&&(e.yG2(),e.E7m("fullscreen",!0),e.yG2(),e.E7m("ngIf",t.isLoadingBusiness||t.isLoadingProducts),e.yG2(),e.E7m("ngIf",!t.isLoadingBusiness&&!t.isLoadingProducts))},dependencies:[d.ay,d.u_,g.ue,g._G,s.sn,s.KC,s.Gg,s.YY,s.MN,s.I7,s.cz,s.Kk,s._i,s.YP,s.A5,s.qo,s.YA,s.gP,s.qG,y.k,_.s,G.G],styles:["ion-label[_ngcontent-%COMP%]{white-space:normal!important}.centered-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-card-title[_ngcontent-%COMP%]{--color: white}ion-card-subtitle[_ngcontent-%COMP%]{--color: orange}success[_ngcontent-%COMP%]{color:green}"]}),l})()}];let O=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.a4G({type:i}),i.\u0275inj=e.s3X({imports:[p.qQ.forChild(x),p.qQ]}),l})();var k=a(28);let R=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.a4G({type:i}),i.\u0275inj=e.s3X({imports:[d.MD,g.y,s.wZ,O,k.A]}),l})()}}]);