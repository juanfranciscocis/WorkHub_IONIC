"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9e3],{9e3:(N,P,c)=>{c.r(P),c.d(P,{ProfilePageModule:()=>S});var m=c(1368),f=c(4716),a=c(2112),h=c(2508),d=c(1528),e=c(4496),p=c(7808),y=c(2948),_=c(4256),b=c(8828);let G=(()=>{var o;class l{constructor(){}}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.wxM({token:o,factory:o.\u0275fac,providedIn:"root"}),l})();var I=c(6032),x=c(7700),M=c(3008);function k(o,l){1&o&&(e.I0R(0,"div",3),e.wR5(1,"ion-spinner",4),e.C$Y())}function O(o,l){if(1&o){const i=e.KQA();e.I0R(0,"ion-chip",21),e.qCj("click",function(){const r=e.usT(i).$implicit,s=e.GaO(2);return e.CGJ(s.addCategory(r))}),e.OEk(1),e.C$Y()}if(2&o){const i=l.$implicit;e._6D("id",i),e.yG2(),e.cNF(i)}}function R(o,l){if(1&o){const i=e.KQA();e.I0R(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.OEk(4),e.C$Y(),e.I0R(5,"ion-card-subtitle")(6,"ion-input",5),e.iHE("ngModelChange",function(n){e.usT(i);const r=e.GaO();return e.kNx(r.business.price,n)||(r.business.price=n),e.CGJ(n)}),e.C$Y()()(),e.I0R(7,"div",6)(8,"ion-card-content",7),e.wR5(9,"img",8),e.C$Y()(),e.I0R(10,"ion-card-content")(11,"ion-textarea",9),e.iHE("ngModelChange",function(n){e.usT(i);const r=e.GaO();return e.kNx(r.business.description,n)||(r.business.description=n),e.CGJ(n)}),e.C$Y()(),e.I0R(12,"ion-card-content")(13,"ion-textarea",10),e.iHE("ngModelChange",function(n){e.usT(i);const r=e.GaO();return e.kNx(r.business.contact,n)||(r.business.contact=n),e.CGJ(n)}),e.C$Y()()(),e.I0R(14,"ion-grid")(15,"ion-row")(16,"ion-col",11),e.yuY(17,O,2,2,"ion-chip",12),e.C$Y()()(),e.wR5(18,"app-products",13),e.I0R(19,"ion-button",14),e.qCj("click",function(){e.usT(i);const n=e.GaO();return e.CGJ(n.presentAlert())}),e.OEk(20,"Add Product"),e.C$Y(),e.I0R(21,"ion-button",15),e.qCj("click",function(){e.usT(i);const n=e.GaO();return e.CGJ(n.publish())}),e.OEk(22,"Publish"),e.C$Y(),e.I0R(23,"ion-button",16),e.wR5(24,"input",17,18),e.C$Y(),e.I0R(26,"ion-button",19),e.qCj("click",function(){e.usT(i);const n=e.Gew(25),r=e.GaO();return e.CGJ(r.uploadFile(n))}),e.OEk(27,"Upload File"),e.C$Y(),e.I0R(28,"ion-button",20),e.qCj("click",function(){e.usT(i);const n=e.GaO();return e.CGJ(n.logout())}),e.OEk(29,"Logout"),e.C$Y()()}if(2&o){const i=e.GaO();e.yG2(4),e.cNF(i.business.companyName),e.yG2(2),e._6D("value",i.business.price),e.OKB("ngModel",i.business.price),e.yG2(3),e._6D("alt",i.business.companyName),e.E7m("src",i.business.image,e.K6U),e.yG2(2),e._6D("value",i.business.description),e.OKB("ngModel",i.business.description),e.yG2(2),e._6D("value",i.business.contact),e.OKB("ngModel",i.business.contact),e.yG2(4),e.E7m("ngForOf",i.categories),e.yG2(),e.E7m("products",i.products)}}const T=[{path:"",component:(()=>{var o;class l{constructor(t,n,r,s,u,g){this.alertController=t,this.postsService=n,this.userService=r,this.router=s,this.searchService=u,this.imagesService=g,this.storage=(0,e.uUt)(p.u_),this.categories=["Electronics","Clothing","Food","Tourism","Furniture","Books","Other"],this.products=[],this.business={companyName:"",price:0,description:"",image:"https://ionicframework.com/docs/img/demos/card-media.png",contact:0},this.nameParam="",this.isLoadingBusiness=!0,this.isLoadingProducts=!0,this.alertInputs=[{name:"productName",type:"text",placeholder:"Product Name",attributes:{maxlength:10}},{name:"productImage",type:"url",placeholder:"Product Image"},{name:"price",type:"number",placeholder:"Price"}]}ngOnInit(){var t=this;return(0,d.c)(function*(){var n,r;t.nameParam=(null===(n=t.userService.getCurrentUser())||void 0===n?void 0:n.companyName)||"",console.log(t.nameParam),t.postsService.getPostByCompanyName(t.nameParam).then(s=>{t.business=s,console.log(t.business),t.isLoadingBusiness=!1}),t.postsService.getProductByName(t.nameParam).then(s=>{t.products=s,console.log("Products:",t.products),t.isLoadingProducts=!1}),t.searchService.getCategories((null===(r=t.userService.getCurrentUser())||void 0===r?void 0:r.companyName)||"").then(s=>{console.log(s),s.forEach(u=>{let g=document.getElementById(u);g&&(g.style.backgroundColor="green")})})})()}presentAlert(){var t=this;return(0,d.c)(function*(){var r;yield(yield t.alertController.create({header:"Create a new product",inputs:t.alertInputs,buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Save",handler:(r=(0,d.c)(function*(s){yield t.postsService.createProduct(s,t.business).then(u=>{location.reload()})}),function(u){return r.apply(this,arguments)})}]})).present()})()}logout(){this.userService.clearCurrentUser(),this.nameParam="",this.router.navigateByUrl("/profile",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/login"])})}publish(){this.postsService.updatePost(this.business).then(t=>{location.reload()})}addCategory(t){this.searchService.addCategory(t,this.business.companyName).then(n=>{n||location.reload();let r=document.getElementById(t);r.style.backgroundColor="green"===(null==r?void 0:r.style.backgroundColor)?"ion-color-primary":"green"})}uploadFile(t){var n=this;return(0,d.c)(function*(){if(!t.files)return;const r=t.files;for(let s=0;s<r.length;s++){const u=r.item(s);if(u){const g=(0,p.IL)(n.storage,u.name);yield(0,p.GY)(g,u).then(v=>{console.log("Uploaded a blob or file!",v.ref.fullPath),n.downloadFile(v.ref.fullPath).then(function(){var F=(0,d.c)(function*(C){n.business.image=C,console.log(n.business.image),yield n.publish()});return function(C){return F.apply(this,arguments)}}())})}}})()}downloadFile(t){var n=this;return(0,d.c)(function*(){let r="";return yield(0,p.Kq)((0,p.IL)(n.storage,t)).then(s=>{console.log("File available at",s),r=s}),r})()}}return(o=l).\u0275fac=function(t){return new(t||o)(e.GI1(a.iW),e.GI1(y.c),e.GI1(_.u),e.GI1(h.E5),e.GI1(b._),e.GI1(G))},o.\u0275cmp=e.In1({type:o,selectors:[["app-profile"]],decls:5,vars:3,consts:[[3,"fullscreen"],["class","flex justify-center items-center p-5",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","p-5"],["name","lines"],["placeholder","Price of the service",3,"ngModel","value","ngModelChange"],[1,"min-w-56"],[1,"card-content"],[1,"centered-image",3,"src","alt"],["auto-grow","true","placeholder","Add a description here",3,"ngModel","value","ngModelChange"],["placeholder","Add a contact number here",3,"ngModel","value","ngModelChange"],["size","12"],[3,"id","click",4,"ngFor","ngForOf"],[3,"products"],["color","primary","expand","block",1,"ion-margin",3,"click"],["color","orange","expand","block",1,"ion-margin",3,"click"],["expand","block",1,"ion-margin"],["type","file"],["upload",""],["expand","block",1,"ion-margin",3,"click"],["expand","block","color","danger",1,"ion-margin",3,"click"],[3,"id","click"]],template:function(t,n){1&t&&(e.wR5(0,"app-header"),e.I0R(1,"ion-content",0),e.yuY(2,k,2,0,"div",1)(3,R,30,11,"div",2),e.C$Y(),e.wR5(4,"app-barfooter")),2&t&&(e.yG2(),e.E7m("fullscreen",!0),e.yG2(),e.E7m("ngIf",n.isLoadingBusiness||n.isLoadingProducts),e.yG2(),e.E7m("ngIf",!n.isLoadingBusiness&&!n.isLoadingProducts))},dependencies:[m.ay,m.u_,f.ue,f._G,a.sn,a.KC,a.Gg,a.YY,a.MN,a.I7,a.cz,a.Kk,a._i,a.YP,a.A5,a.qo,a.YA,a.gP,a.qG,I.k,x.s,M.G],styles:["ion-label[_ngcontent-%COMP%]{white-space:normal!important}.centered-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-card-title[_ngcontent-%COMP%]{--color: white}ion-card-subtitle[_ngcontent-%COMP%]{--color: orange}success[_ngcontent-%COMP%]{color:green}"]}),l})()}];let Y=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.a4G({type:o}),o.\u0275inj=e.s3X({imports:[h.qQ.forChild(T),h.qQ]}),l})();var E=c(28);let S=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.a4G({type:o}),o.\u0275inj=e.s3X({imports:[m.MD,f.y,a.wZ,Y,E.A]}),l})()}}]);