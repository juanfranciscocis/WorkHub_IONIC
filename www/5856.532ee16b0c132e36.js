"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5856],{5856:(N,P,l)=>{l.r(P),l.d(P,{ProfilePageModule:()=>T});var p=l(1368),f=l(4716),a=l(2112),h=l(2508),m=l(1528),e=l(4496),y=l(2948),C=l(4256),g=l(5296);let _=(()=>{var n;class u{constructor(t){this.firestore=t}getCategories(t){var o=this;return(0,m.c)(function*(){let i,s=[];const c=(0,g.UN)(o.firestore,"categories",t),d=yield(0,g.i4)(c);return d.exists()&&(i=d.data(),s=i.category),Promise.resolve(s)})()}addCategory(t,o){var i=this;return(0,m.c)(function*(){let s,c=[];const d=(0,g.UN)(i.firestore,"categories",o),v=yield(0,g.i4)(d);return v.exists()&&(s=v.data(),c=s.category,console.log(c)),c.includes(t)?(c=c.filter(E=>E!==t),yield(0,g.Sm)(d,{category:c}),Promise.resolve(!1)):(c.push(t),yield(0,g.Sm)(d,{category:c}),Promise.resolve(!0))})()}}return(n=u).\u0275fac=function(t){return new(t||n)(e.CoB(g.OI))},n.\u0275prov=e.wxM({token:n,factory:n.\u0275fac,providedIn:"root"}),u})();var G=l(6032),b=l(7700),I=l(3008);function M(n,u){1&n&&(e.I0R(0,"div",3),e.wR5(1,"ion-spinner",4),e.C$Y())}function x(n,u){if(1&n){const r=e.KQA();e.I0R(0,"ion-chip",16),e.qCj("click",function(){const i=e.usT(r).$implicit,s=e.GaO(2);return e.CGJ(s.addCategory(i))}),e.OEk(1),e.C$Y()}if(2&n){const r=u.$implicit;e._6D("id",r),e.yG2(),e.cNF(r)}}function O(n,u){if(1&n){const r=e.KQA();e.I0R(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.OEk(4),e.C$Y(),e.I0R(5,"ion-card-subtitle")(6,"ion-input",5),e.iHE("ngModelChange",function(o){e.usT(r);const i=e.GaO();return e.kNx(i.business.price,o)||(i.business.price=o),e.CGJ(o)}),e.C$Y()()(),e.I0R(7,"div",6),e.wR5(8,"img",7),e.C$Y(),e.I0R(9,"ion-card-content")(10,"ion-textarea",8),e.iHE("ngModelChange",function(o){e.usT(r);const i=e.GaO();return e.kNx(i.business.description,o)||(i.business.description=o),e.CGJ(o)}),e.C$Y()(),e.I0R(11,"ion-card-content")(12,"ion-textarea",9),e.iHE("ngModelChange",function(o){e.usT(r);const i=e.GaO();return e.kNx(i.business.contact,o)||(i.business.contact=o),e.CGJ(o)}),e.C$Y()()(),e.I0R(13,"ion-grid")(14,"ion-row")(15,"ion-col",10),e.yuY(16,x,2,2,"ion-chip",11),e.C$Y()()(),e.wR5(17,"app-products",12),e.I0R(18,"ion-button",13),e.qCj("click",function(){e.usT(r);const o=e.GaO();return e.CGJ(o.presentAlert())}),e.OEk(19,"Add Product"),e.C$Y(),e.I0R(20,"ion-button",14),e.qCj("click",function(){e.usT(r);const o=e.GaO();return e.CGJ(o.publish())}),e.OEk(21,"Publish"),e.C$Y(),e.I0R(22,"ion-button",15),e.qCj("click",function(){e.usT(r);const o=e.GaO();return e.CGJ(o.logout())}),e.OEk(23,"Logout"),e.C$Y()()}if(2&n){const r=e.GaO();e.yG2(4),e.cNF(r.business.companyName),e.yG2(2),e._6D("value",r.business.price),e.OKB("ngModel",r.business.price),e.yG2(2),e._6D("alt",r.business.companyName),e.E7m("src",r.business.image,e.K6U),e.yG2(2),e._6D("value",r.business.description),e.OKB("ngModel",r.business.description),e.yG2(2),e._6D("value",r.business.contact),e.OKB("ngModel",r.business.contact),e.yG2(4),e.E7m("ngForOf",r.categories),e.yG2(),e.E7m("products",r.products)}}const S=[{path:"",component:(()=>{var n;class u{constructor(t,o,i,s,c){this.alertController=t,this.postsService=o,this.userService=i,this.router=s,this.searchService=c,this.categories=["Electronics","Clothing","Food","Tourism","Furniture","Books","Other"],this.products=[],this.business={companyName:"",price:0,description:"",image:"https://ionicframework.com/docs/img/demos/card-media.png",contact:0},this.nameParam="",this.isLoadingBusiness=!0,this.isLoadingProducts=!0,this.alertInputs=[{name:"productName",type:"text",placeholder:"Product Name",attributes:{maxlength:10}},{name:"productImage",type:"url",placeholder:"Product Image"},{name:"price",type:"number",placeholder:"Price"}]}ngOnInit(){var t=this;return(0,m.c)(function*(){var o,i;t.nameParam=(null===(o=t.userService.getCurrentUser())||void 0===o?void 0:o.companyName)||"",console.log(t.nameParam),t.postsService.getPostByCompanyName(t.nameParam).then(s=>{t.business=s,console.log(t.business),t.isLoadingBusiness=!1}),t.postsService.getProductByName(t.nameParam).then(s=>{t.products=s,console.log("Products:",t.products),t.isLoadingProducts=!1}),t.searchService.getCategories((null===(i=t.userService.getCurrentUser())||void 0===i?void 0:i.companyName)||"").then(s=>{console.log(s),s.forEach(c=>{let d=document.getElementById(c);d&&(d.style.backgroundColor="green")})})})()}presentAlert(){var t=this;return(0,m.c)(function*(){var i;yield(yield t.alertController.create({header:"Create a new product",inputs:t.alertInputs,buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Save",handler:(i=(0,m.c)(function*(s){yield t.postsService.createProduct(s,t.business).then(c=>{location.reload()})}),function(c){return i.apply(this,arguments)})}]})).present()})()}logout(){this.userService.clearCurrentUser(),this.nameParam=""}publish(){this.postsService.updatePost(this.business).then(t=>{location.reload()})}addCategory(t){this.searchService.addCategory(t,this.business.companyName).then(o=>{o||location.reload();let i=document.getElementById(t);i.style.backgroundColor="green"===(null==i?void 0:i.style.backgroundColor)?"ion-color-primary":"green"})}}return(n=u).\u0275fac=function(t){return new(t||n)(e.GI1(a.iW),e.GI1(y.c),e.GI1(C.u),e.GI1(h.E5),e.GI1(_))},n.\u0275cmp=e.In1({type:n,selectors:[["app-profile"]],decls:5,vars:3,consts:[[3,"fullscreen"],["class","flex justify-center items-center p-5",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","p-5"],["name","lines"],["placeholder","Price of the service",3,"ngModel","value","ngModelChange"],[1,"min-w-56"],[1,"min-w-56",3,"src","alt"],["auto-grow","true","placeholder","Add a description here",3,"ngModel","value","ngModelChange"],["placeholder","Add a contact number here",3,"ngModel","value","ngModelChange"],["size","12"],[3,"id","click",4,"ngFor","ngForOf"],[3,"products"],["color","primary","expand","block",1,"ion-margin",3,"click"],["color","orange","expand","block",1,"ion-margin",3,"click"],["expand","block","color","danger",1,"ion-margin",3,"click"],[3,"id","click"]],template:function(t,o){1&t&&(e.wR5(0,"app-header"),e.I0R(1,"ion-content",0),e.yuY(2,M,2,0,"div",1)(3,O,24,11,"div",2),e.C$Y(),e.wR5(4,"app-barfooter")),2&t&&(e.yG2(),e.E7m("fullscreen",!0),e.yG2(),e.E7m("ngIf",o.isLoadingBusiness||o.isLoadingProducts),e.yG2(),e.E7m("ngIf",!o.isLoadingBusiness&&!o.isLoadingProducts))},dependencies:[p.ay,p.u_,f.ue,f._G,a.sn,a.KC,a.Gg,a.YY,a.MN,a.I7,a.cz,a.Kk,a._i,a.YP,a.A5,a.qo,a.YA,a.gP,a.qG,G.k,b.s,I.G],styles:["ion-label[_ngcontent-%COMP%]{white-space:normal!important}img[_ngcontent-%COMP%]{width:100%;height:auto}ion-card-title[_ngcontent-%COMP%]{--color: white}ion-card-subtitle[_ngcontent-%COMP%]{--color: orange}success[_ngcontent-%COMP%]{color:green}"]}),u})()}];let k=(()=>{var n;class u{}return(n=u).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.a4G({type:n}),n.\u0275inj=e.s3X({imports:[h.qQ.forChild(S),h.qQ]}),u})();var R=l(28);let T=(()=>{var n;class u{}return(n=u).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.a4G({type:n}),n.\u0275inj=e.s3X({imports:[p.MD,f.y,a.wZ,k,R.A]}),u})()}}]);